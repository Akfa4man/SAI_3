using System;

namespace SAI_3.Data
{
    /// <summary>
    /// Хранилище эталонных шаблонов цифр 0..9 в виде матрицы 5x7.
    /// <para>
    /// Каждый шаблон задан как набор строк, где:
    /// '1' — закрашенный пиксель, '0' — фон.
    /// </para>
    /// <para>
    /// Используется для формирования входного вектора (признаков) фиксированной длины 35:
    /// 7 строк * 5 столбцов, развёртка выполняется построчно.
    /// </para>
    /// </summary>
    public static class DigitTemplates
    {
        /// <summary>
        /// Эталонные 5x7 шаблоны цифр 0..9.
        /// </summary>
        private static readonly string[][] Templates =
        {
            // 0
            new[]
            {
                "01110",
                "10001",
                "10011",
                "10101",
                "11001",
                "10001",
                "01110"
            },
            // 1
            new[]
            {
                "00100",
                "01100",
                "00100",
                "00100",
                "00100",
                "00100",
                "01110"
            },
            // 2
            new[]
            {
                "01110",
                "10001",
                "00001",
                "00010",
                "00100",
                "01000",
                "11111"
            },
            // 3
            new[]
            {
                "11110",
                "00001",
                "00001",
                "01110",
                "00001",
                "00001",
                "11110"
            },
            // 4
            new[]
            {
                "00010",
                "00110",
                "01010",
                "10010",
                "11111",
                "00010",
                "00010"
            },
            // 5
            new[]
            {
                "11111",
                "10000",
                "10000",
                "11110",
                "00001",
                "00001",
                "11110"
            },
            // 6
            new[]
            {
                "00110",
                "01000",
                "10000",
                "11110",
                "10001",
                "10001",
                "01110"
            },
            // 7
            new[]
            {
                "11111",
                "00001",
                "00010",
                "00100",
                "01000",
                "01000",
                "01000"
            },
            // 8
            new[]
            {
                "01110",
                "10001",
                "10001",
                "01110",
                "10001",
                "10001",
                "01110"
            },
            // 9
            new[]
            {
                "01110",
                "10001",
                "10001",
                "01111",
                "00001",
                "00010",
                "11100"
            }
        };

        /// <summary>
        /// Возвращает входной вектор признаков длиной 35 для заданной цифры.
        /// </summary>
        /// <param name="digit">Цифра (класс) в диапазоне 0..9.</param>
        /// <returns>
        /// Новый массив <see cref="double"/> длиной 35, где каждый элемент равен 0.0 или 1.0.
        /// Порядок развёртки: построчно (r = 0..6), внутри строки слева направо (c = 0..4).
        /// </returns>
        public static double[] GetVector(int digit)
        {
            if (digit < 0 || digit > 9)
                throw new ArgumentOutOfRangeException(nameof(digit));

            var rows = Templates[digit];

            var v = new double[35];
            int idx = 0;

            for (int r = 0; r < 7; r++)
            {
                for (int c = 0; c < 5; c++)
                {
                    v[idx++] = rows[r][c] == '1' ? 1.0 : 0.0;
                }
            }

            return v;
        }
    }
}